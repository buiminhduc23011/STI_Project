/*==================================================================================================
*   Project              :  IOT GUNZE
*   Doccument            :  ESP32 Ethernet
*   FileName             :  Ethernet.c
*   File Description     :  Khai bao cac ham nap MB Master
*
==================================================================================================*/
/*==================================================================================================
Revision History:
Modification
    Author                  	Date D/M/Y     Description of Changes
----------------------------	----------     ------------------------------------------
    BÙI VĂN ĐỨC              	25/11/2024     Tao file
----------------------------	----------     ------------------------------------------
==================================================================================================*/

/*==================================================================================================
*                                        INCLUDE FILES
==================================================================================================*/
#include "IO.h"
#include <stdbool.h>
#include <string.h>


/*==================================================================================================
*                                     FILE VERSION CHECKS
==================================================================================================*/

/*==================================================================================================
*                          LOCAL TYPEDEFS (STRUCTURES, UNIONS, ENUMS)
==================================================================================================*/

/*==================================================================================================
*                                       LOCAL MACROS
==================================================================================================*/

/*==================================================================================================
*                                      LOCAL CONSTANTS
==================================================================================================*/
/*==================================================================================================
*                                      LOCAL VARIABLES
==================================================================================================*/
static char TAG[] = "IO-TASK";

//---------------------------------------------------------------------------------------------------

/*==================================================================================================
*                                      GLOBAL CONSTANTS
==================================================================================================*/
/*==================================================================================================
*                                      GLOBAL VARIABLES
==================================================================================================*/
/*==================================================================================================
*                                   LOCAL FUNCTION PROTOTYPES
==================================================================================================*/

/*==================================================================================================
*                                       LOCAL FUNCTIONS
==================================================================================================*/

/*==================================================================================================
*                                      GLOBAL FUNCTIONS
==================================================================================================*/

void IO_Start(void)
{
    gpio_config_t io_conf = {};

    // Cấu hình INPUT
    io_conf.mode = GPIO_MODE_INPUT;                                                                           // Chế độ input
    io_conf.pin_bit_mask = (1ULL << INPUT_01) | (1ULL << INPUT_02) | (1ULL << INPUT_03) | (1ULL << INPUT_04); // Các chân input
    io_conf.pull_down_en = GPIO_PULLDOWN_DISABLE;                                                             // Không sử dụng pull-down
    io_conf.pull_up_en = GPIO_PULLUP_DISABLE;                                                                 // Không sử dụng pull-up
    gpio_config(&io_conf);

    // Cấu hình OUTPUT
    io_conf.mode = GPIO_MODE_OUTPUT;                                                                              // Chế độ output
    io_conf.pin_bit_mask = (1ULL << OUTPUT_01) | (1ULL << OUTPUT_02) | (1ULL << OUTPUT_03) | (1ULL << OUTPUT_04); // Các chân output
    io_conf.pull_down_en = GPIO_PULLDOWN_DISABLE;                                                                 // Không sử dụng pull-down
    io_conf.pull_up_en = GPIO_PULLUP_DISABLE;                                                                     // Không sử dụng pull-up
    gpio_config(&io_conf);

    // Đặt các chân OUTPUT ban đầu ở mức thấp (LOW)
    gpio_set_level(OUTPUT_01, LOW);
    gpio_set_level(OUTPUT_02, LOW);
    gpio_set_level(OUTPUT_03, LOW);
    gpio_set_level(OUTPUT_04, LOW);
}

bool IO_Get_RunState()
{
    return !gpio_get_level(INPUT_01);
}
bool IO_Get_ErrorState()
{
    return !gpio_get_level(INPUT_01);
}
//======================================END FILE===================================================
